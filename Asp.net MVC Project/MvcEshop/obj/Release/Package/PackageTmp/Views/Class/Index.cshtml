@model IEnumerable<MvcEshop.Models.Class>
@using System.Linq;

@{
    ViewBag.Title = "فهرست " + Resources.DisplayNames.Classes;
    ViewBag.LayoutType = "Grid";
}


<div class="k-rtl">

    @{
        Infrastructure.MyRoleProvider oMyRoleProvider =
            new Infrastructure.MyRoleProvider();
    }

    @*check if the currrent role of the user is "Instructor".*@
    @if (System.Convert.ToInt32
                (System.Web.HttpContext.Current.Session["RoleId"].ToString()) == 4)
    {

        @(Html.Kendo().Grid(Model)
                  .Name("Grid")
                  .Columns(columns =>
                      {
                          

                          columns.Bound(model => model.ClassId).Width(120)
                              .Title(Resources.DisplayNames.ClassId);
                          
                          columns.Bound(model => model.Title).Width(120)
                              .Title(Resources.DisplayNames.Title);

                          columns.Bound(model => model.Account.AccountTitle).Width(120)
                              .Title(Resources.DisplayNames.Account);
                          
                          columns.Bound(model => model.IsActive).Width(70)
                              .Title(Resources.DisplayNames.Active);

                          columns.Bound(model => model.EnrollmentPassword).Width(100)
                              .Title(Resources.DisplayNames.EnrollmentPassword);

                          columns.Bound(model => model.DisplayStartDate).Width(90)
                              .Title(Resources.DisplayNames.Date + " " + Resources.DisplayNames.Start);

                          columns.Bound(model => model.DisplayEndDate).Width(90)
                             .Title(Resources.DisplayNames.Date + " " + Resources.DisplayNames.End);

                          columns.Bound(item => @item.ClassId).Width(70).Title(Resources.DisplayNames.Students).Filterable(false).Groupable(false)
                                   .Template(@<text>

                                <a href="/User/Index/@item.ClassId">
                                    <img src="~/Content/Files/Icons/user_phd_group.png" />
                                </a>

                               
                                </text>);

                          columns.Bound(item => @item.ClassId).Width(50).Title(Resources.DisplayNames.Assignments).Filterable(false).Groupable(false)
                                                .Template(@<text>

                                <a href="/Assignment/Index/@item.ClassId">
                                    <img src="~/Content/Files/Icons/Documents-icon.png" />
                                </a>


                                                </text>);

                          columns.Bound(item => @item.ClassId).Width(50)
                              .Title(Resources.DisplayNames.Edit).Filterable(false).Groupable(false)
                                  .Template(@<text>
                                <a href="/Class/Edit/@item.ClassId">
                                    <img src="~/Content/Files/Icons/edit-file-icon.png" />
                                </a>

                                </text>).Width(50);

                          columns.Bound(item => @item.ClassId).Width(50).Title(Resources.DisplayNames.Delete).Filterable(false).Groupable(false)
                                                .Template(@<text>
                                <a href="/Class/Delete/@item.ClassId">
                                    <img src="~/Content/Files/Icons/Trash-empty-icon.png" />
                                </a>

                                                </text>).Width(50);
                      })
                                                                                                                                                                                                                                                                .ToolBar(toolbar =>
                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                               toolbar.Template(@<text> <a href="/Class/Create" class="btn btn-primary KendoGridToolbarButton" role="button">
                                                                                                                                                                                                                                                                                        <span class="glyphicon glyphicon-plus KendoGridToolbarButtonIcon"></span>
                                                                                                                                                                                                                                                                                        @Resources.DisplayNames.Add
                                                                                                                                                                                                                                                                                    </a></text>);
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        )
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .Groupable()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .Pageable()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .Sortable()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .Scrollable()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .Filterable()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .DataSource(dataSource => dataSource
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    .Server()

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    .Model(model => model.Id(item => item.ClassId))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    )
)
    }



    @*check if the current role of the user is "Student".*@
    @if (System.Convert.ToInt32
                (System.Web.HttpContext.Current.Session["RoleId"].ToString()) == 5)
    {

        @(Html.Kendo().Grid(Model)
                  .Name("Grid")
                  .Columns(columns =>
                      {
                          columns.Bound(model => model.Account.AccountTitle).Width(120)
                              .Title(Resources.DisplayNames.Account);

                          columns.Bound(model => model.Title).Width(120)
                              .Title(Resources.DisplayNames.Title);

                          columns.Bound(model => model.IsActive).Width(70)
                              .Title(Resources.DisplayNames.Active);

                          columns.Bound(model => model.DisplayStartDate).Width(90)
                              .Title(Resources.DisplayNames.Date + " " + Resources.DisplayNames.Start);

                          columns.Bound(model => model.DisplayEndDate).Width(90)
                             .Title(Resources.DisplayNames.Date + " " + Resources.DisplayNames.End);


                          columns.Bound(item => @item.ClassId).Width(50).Title(Resources.DisplayNames.Assignments).Filterable(false).Groupable(false)
                                                .Template(@<text>

                                <a href="/Assignment/Index/@item.ClassId">
                                    <img src="~/Content/Files/Icons/Documents-icon.png" />
                                </a>


                                                </text>);

                          
                      })
                                                                                                                                                                                                                                                                .ToolBar(toolbar =>
                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        )
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .Groupable()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .Pageable()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .Sortable()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .Scrollable()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .Filterable()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .DataSource(dataSource => dataSource
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    .Server()

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    .Model(model => model.Id(item => item.ClassId))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    )
        )
    }


</div>
